## 　2023年9月22日(金)
# 【取り組んだ課題一覧】
## ☆Docker
⚫︎Docker入門<br>
・入門 Dockerを読む<br>
→プロダクションでの活用-Dockerfileのベストプラクティス-まで<br>
# 【わかったこと】
『入門 Docker』<br>
[プロダクションでの活用-オーケストレーションツール-]
⚫︎オーケストレーションツールとは
複数のDockerを扱うための技術である。主にDockerの管理/自動復旧・ネットワークの管理・オートスケールなど、本番のワークロードに必要な機能を備えている。
⚫︎代表的なオーケストレーションツール
・docker-compose
Docker社がホストするオーケストレーションツール。ローカルでdockerを動かす際のデファクトスタンダードとなっているツールである。Docker for Mac/Windowsをインストール時に同時にインストールされているため、インストールも簡単。
・swarm
Docker社がホストするオーケストレーションツール。docker-composeと相性がよく、docker-compose.yamlを拡張することで本番のワークロードでDockerを使用することができる。
・ECS (Elastic Container Service)
AWSが開発したオーケストレーションツール。AWSが開発したということで、他のAWSサービスと連携が行いやすい。また、他のオーケストレーションツールと比較して責任を持つ範囲が狭いため、比較的学習コストが低い。
⚫︎Kubernetes
Google社が開発したOSSのオーケストレーションツール。Kubernetesが現在のデファクトスタンダード。自由度が高く豊富なエコシステムがあり、コミュニティも非常に活発である。
[プロダクションでの活用-docker-compose-]
⚫︎概要
docker-composeはローカルでDockerのオーケストレーションを行うためのツールである。DockerのビルドからNetworkやVolumeの管理をコードベースで定義して行ってくれる。
⚫︎nginxを立ち上げるサンプル
docker-composeはDockerの構成をyamlを定義し、そのyamlを元に起動する。
例）nginxを起動し、ホストの8080ポートへコンテナの80ポートをフォワードする
```
version: '3.7'

services:
  nginx:
    image: nginx
    ports:
      - 8080:80
```
`docker run -p 8080:80 nginx`とほぼ同じ動きをする。(異なる点としては、docker-composeでは専用のNetworkを作成・使用する点である。)
単純なnginxの起動であれば素のdockerコマンドで問題ないが、ここにPHP, MySQL...と増えていくとその威力を発揮する。
⚫︎Laravelのサンプルを元に学ぶ
・version
docker-composeのバージョンを指定する。特にこだわりがなければ最新のものを記述するようにすること。
例）`version: '3.7'`
・services
起動するコンテナの定義を行う。
例）
```
services:
  nginx:
```
・IMAGE
コンテナを起動するDocker Imageを指定する。
例）`image: mysql:5.7`
・build
docker buildの実行情報を記述する。ここで定義された情報を元にDockerをビルドし、そのビルドしたイメージ使用してコンテナを起動する。imageもしくはbuildどちらかを記述する必要がある。コマンドの場合、`docker build -f docker/nginx/Dockerfile .`と同一である。
例）
```
build:
  context: .
  dockerfile: docker/nginx/Dockerfile
```
・volumes
ボリュームのマウントを行う。 コマンドの場合、`-v $(pwd)/public:/var/www/html/public:ro <IMAGE ID>`オプションと同一である。
例）
```
volumes:
  - ./public:/var/www/html/public:ro
```
・ports
ポートの開放を行う。左にホストのポートを、右にコンテナのポートを指定する。コマンドの場合、`-p 8080:80`オプションと同一である。
例）
```
ports:
  - 8080:80
```
・environment
起動するコンテナへ環境変数を定義する。コマンドの場合、`-e PHP_HOST=app`オプションと同一である。
例）
```
environment:
  PHP_HOST: app
```
・env_file
ファイルに定義された環境変数を読み取り、コンテナへ定義する。
例）
```
env_file:
  - .env.example
```
・command

例）``
【次やること】
## ☆Docker
⚫︎Docker入門<br>
・入門 Dockerを読む<br>
→プロダクションでの活用-オーケストレーションツール-から<br>
# 【感じたこと】
・本日は学習の方は滞りなく進めることができましたが、日報を保存することなくWebサイトから離れてしまったため本日分の記載内容がほぼ消えてしまいました。実際のコーディングではなかったため本当によかったです。保存することの重要性を改めて実感しました。とはいえ結構な量をまとめていたので落ち込みました。<br>
・本日時2間01分<br>
・月合計:57時間14分<br>
・累計:460間08分<br>
