## 　2023年2月18日(土)
# 【取り組んだ課題一覧】
## ☆プログラミングに触れてみる
・progateでプログラミングに触れてみよう  
→progateでの学習【道場レッスン Ruby on Rails5 I ~  1 章：トップページ・サービス紹介ページを作ろう(トップページを作ろう) ~】最後まで
# 【わかったこと】
## ☆【Ruby on Rails5 II】
・データベースとは、データを保存しておく場所のことをいう。  
・一覧ページを作成する時は、indexというアクション名を使用することが一般的なため、indexアクションを用意する。  
・「rails generate controller posts index」と実行することで、postsコントローラを作成できる。  
・「rails generate controller」は「rails g controller」と省略することができる。  
・index.html.erbのようなerbという形式のファイルでは、<% %>で囲むことで、HTMLファイルの中にRubyのコードを記述することができる。  
・埋め込むRubyコードをブラウザに表示したい場合には、<% %>ではなく、<%= %>を用いる。  
・<% %>の場合は何も表示されないため、変数の定義などに用いる。<%= %>の場合では、Rubyコードの中身が表示されるため、変数の値などを実際にページ内に表示したい場合に用いる。  
・ビューで使う変数はアクションで定義することが一般的。「def index」と「end」の間で変数を定義することで、その変数をindex.html.erb内で使用することができる。  
→通常、アクションで定義した変数をビューで使用することはできない。しかし、変数名を「@」から始めることでこの変数は特殊な変数となり、ビューファイルでも使用することができる。(アクションで定義したビュー用の変数には「@」をつけ忘れないように注意すること。)  
・データベースは表でデータを管理しており、その表のことを「テーブル」と呼ぶ。縦の列のことを「カラム」、1行ずつのデータのことを「レコード」と呼ぶ。  
・posts テーブルを作成する手順  
  ①データベースに変更を指示するファイルを作成する  
  ②データベースに変更を反映する  
・マイグレーションファイル-データベースに変更を指示するためのファイル。マイグレーションファイルは「rails g model Post content:text」というコマンドで作成することができる。(gはganerateでも可。「content」の部分はカラム名、「text」の部分はデータの形式を指定する。)また、「text」は「長い文字列」を意味しており、contentカラムにどのようなデータが入るかを意味している。  
→上記のコマンドを実行すると、db/migrateフォルダの下にマイグレーションファイルが作成される。  
・作成したマイグレーションファイルを使い、データベースに変更を反映するには、「rails db:migrate」コマンドを実行する。  
・Railsでは、データベースに反映されていないマイグレーションファイルが存在する状態で、どこかのページにアクセスするとマイグレーションエラーが発生する。そのため、マイグレーションファイルを作成した場合は必ず「rails db:migrate」を実行する必要がある。  
・「rails g model」コマンドによって、Postモデルが定義されたファイル「post.rb」が、app/modelsフォルダの中に作成されている。ファイルの中には、ApplicationRecordクラスを継承するPostクラスが定義されている。  
→ApplicationRecordを継承したクラスをモデルと呼ぶ。  
・「rails g model Post ...」の「Post」の部分には、モデル名を指定する。そして、このコマンドによって、以下の2つのファイルが作成される。  
  ①app/modelsフォルダにモデルが定義されたファイル  
  ②db/migrateフォルダにマイグレーションファイル  
・rails consoleの使い方  
(1)ターミナル上で「rails console」と入力し実行（Enter）することで、コンソールを起動することができる。  
(2)コンソールを起動した状態で、「1+1」を実行すると、その実行結果が表示される。  
(3)「quit」を実行すると、コンソールを終了することができる。  
(4)コンソールでは、変数を定義することもできる。定義した変数は「quit」でコンソールを終了するまで使い続けることができる。  
・newメソッド-「rails console」を使ってインスタンスを作成するのに用いる。下記のように書くことで、contentが「Hello world」であるPostインスタンスを作成することができる。  
例）post = Post.new(content:"Hello wolrd")  
・newメソッド-作成したPostインスタンスをpostsテーブルに保存するのに用いる。saveメソッドを使うことができるのはPostモデルがApplicationRecordを継承しているためである。  
・下記のように入力することで、 posts テーブルにある最初のデータを取得することができる。  
例）post = Post.first  
・下記のように入力することで「Post.first」で取得したデータから投稿内容を取得する(contentカラムの値を取り出す)ことができる。  
例）post.content  
・下記のように入力することでテーブルにある全てのデータが配列で取得できる。  
例）posts = Post.all  
・下記のように入力することで配列から1つの要素を取り出す。(学習済み)  
例）Post.all[0]  
・Post.all[0] で取得したデータは、Post.first で取得したときと同じ形のデータなため、 Post.all[0].content とすることで、投稿内容を取得することができる。  
・Railsでは、「views/layouts/application.html.erb」に共通のHTMLを書いておくことができる。初期状態でも、<head>タグや<body>タグなどの共通部分はこちらに書かれている。  
・「views/layouts/application.html.erb」には<%= yield %>というコードがある。top.html.erbなどの各ビューファイルは、この<%= yield %>の部分に代入され、application.html.erbの一部としてブラウザに表示されている。この仕組みによって、ヘッダーなどの共通のレイアウトを1つにまとめることができる。  
・link_toメソッド-link_toメソッドを使うと<a>タグを作成することができる。また、ink_to メソッドは Ruby のコードなので、「<%=%>」で囲むことに注意すること。第一引数に表示する文字を、第二引数にURLを書くことでリンクが作成される。
## ☆【Ruby on Rails5 III】
・idカラム-データベースに保存される時に数字が自動で入る。idは1から順に入っていき、データ毎に重複しないようになっている。  
・created_atカラムとupdated_atカラムには、データベースに保存された時刻が自動で入るようになっている。updated_atはデータ更新時にも時刻が更新される。  
・find_byメソッド-特定のidの投稿を取得するために用いる。find_byメソッドは、ある条件に合致するデータを取得することができる。「モデル名.find_by(カラム名: 値)」とすることで、その値を持ったデータをデータベースから取得することができる。  
・下記のようにルーティングのURL部分に「:」を用いて「posts/:id」と指定することで、「/posts/1」でも「/posts/2」でもshowアクションにいくようにすることができる。  
例）get "posts/:id" => "posts#show"  
・「posts/:id」と書くと「/posts/◯◯」のような全てのURLが該当する。  
・「posts/:id」というルーティングは「posts/index」より下に書かなければいけない。ルーティングは合致するURLを上から順に探す。そのため「posts/index」よりも上に書くと、「localhost:3000/posts/index」というURLは「posts/:id」というルーティングに合致してしまう。  
・コントローラのアクション内では、ルーティングで設定したURLの「:id」の値を取得することができる。その値はparamsという変数にハッシュとして入っている。params[:id]とすることで、その値を取得することができる。  
・HTML & CSSのレッスンで学習した<textarea>タグや<input>タグを用いることで入力フォームを作成することができる。送信ボタンにはtype="submit"と、value="投稿"を指定することに気をつけること。  
・createアクションのようにデータベースに変更を加える場合は「get」ではなく「post」とする必要がある。（この「post」はPostモデルの「Post」とは関係ない。）  
・form_tagメソッド-form_tagメソッドを用いると、フォームに入力されたデータを送信することができる。form_tagは、「form_tag(送信先のURL) do」のように送信先のURLを指定する。  
・redirect_toメソッド-他のURLに転送（リダイレクト）するために用いる。redirect_toは「redirect_to(URL)」とすることで、そのページに転送することができる。  
・<textarea>タグにname属性を指定すると、入力データを送信することができるようになり、name属性の値をキーとしたハッシュがRails側に送られる。  
・name属性を指定したフォームに入力されたデータは、コントローラのアクション内で受け取ることが可能になる。フォームのデータは、変数paramsで受け取る。paramsはname属性に設定した文字列をキーとしたハッシュになっている。  
・データベースに投稿内容を保存するにはPostインスタンスを作成する際にparams[:content]を用いる。そのPostインスタンスを保存することで投稿機能の完成となる。  
・paramsは以下の2通りの使い方がある。  
①「:○○」を使ったルーティングのURLから値を取得する  
②「name="○○"」が付いたフォームの入力内容を受け取る  
・orderメソッド-投稿一覧を並び替える際に用いる。order(カラム名: 並び替えの順序）のように使う。並び替えの順序には、昇順（:asc）と降順（:desc）のどちらかを指定できる。
# 【次やること】
・progateでの学習【道場レッスン Ruby on Rails5 I ~  1 章：トップページ・サービス紹介ページを作ろう(URLを変更しよう) ~】
# 【感じたこと】
・覚えることが多い印象でしたが、以前学習した内容と重なる部分もあるため、めげずに進めていきたいと思います。
# 【学習時間】
・本日:4時間51分  
・累計:41時間50分
